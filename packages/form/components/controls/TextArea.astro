---
/**
 * TEXT AREA COMPONENT
 */
import type { TextArea } from '@astro-reactive/common';

export interface Props {
	control: TextArea;
}

const { control } = Astro.props;

const { validators = [] } = control;

const hasErrors: boolean = !!control.errors?.length;

const validatorAttributes: Record<string, string> = validators?.reduce((prev, validator) => {
	const split: string[] = validator.split(':');
	const label: string = `data-${split[0]}` || 'invalid';
	const value: string | null = split.length > 1 ? split[1] ?? null : 'true';

	return {
		...prev,
		[label]: value,
	};
}, {});
---

<textarea
    name={control.name}
    id={control.name}
    placeholder={control?.placeholder}
    value={control?.value}
    rows={control?.rows ?? 3}
    cols={control?.cols ?? 21}
    data-label={control?.label}
    data-label-position={control?.labelPosition}
	data-validator-haserrors={hasErrors.toString()}
	{...validatorAttributes}
>
{ control.value }
</textarea>